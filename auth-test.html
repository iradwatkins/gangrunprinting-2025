<!DOCTYPE html>
<html>
<head>
    <title>Auth Test</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>Authentication Test</h1>
    <button onclick="testGoogleAuth()">Test Google Auth</button>
    <button onclick="testMagicLink()">Test Magic Link (iradwatkins@gmail.com)</button>
    <button onclick="checkSession()">Check Session</button>
    <div id="result"></div>

    <script>
        const supabase = supabase.createClient(
            'https://dprvugzbsqcufitbxkda.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwcnZ1Z3pic3FjdWZpdGJ4a2RhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2NDAxMjksImV4cCI6MjA2NzIxNjEyOX0.WhXSCItswLC93KdxbM5uo8gIHXYeEdbNxyZpj2og9gg'
        );

        async function testGoogleAuth() {
            console.log('Testing Google Auth...');
            const { data, error } = await supabase.auth.signInWithOAuth({
                provider: 'google',
                options: {
                    redirectTo: window.location.origin
                }
            });
            console.log('Google Auth Result:', { data, error });
            document.getElementById('result').innerHTML = JSON.stringify({ data, error }, null, 2);
        }

        async function testMagicLink() {
            console.log('Testing Magic Link...');
            const { data, error } = await supabase.auth.signInWithOtp({
                email: 'iradwatkins@gmail.com',
                options: {
                    emailRedirectTo: window.location.origin
                }
            });
            console.log('Magic Link Result:', { data, error });
            document.getElementById('result').innerHTML = JSON.stringify({ data, error }, null, 2);
        }

        async function checkSession() {
            console.log('Checking session...');
            const { data, error } = await supabase.auth.getSession();
            console.log('Session:', { data, error });
            document.getElementById('result').innerHTML = JSON.stringify({ data, error }, null, 2);
        }

        // Listen for auth changes
        supabase.auth.onAuthStateChange((event, session) => {
            console.log('Auth state change:', event, session);
            document.getElementById('result').innerHTML = `Event: ${event}, User: ${session?.user?.email || 'None'}`;
        });
    </script>
</body>
</html>